---
description: 
globs: 
alwaysApply: false
---
# íŒŒì¼ ê´€ë¦¬ ë° í”„ë¡œì íŠ¸ êµ¬ì¡° ê·œì¹™

## ğŸš¨ **ì ˆëŒ€ í•˜ì§€ ë§ ê²ƒ**

### 1. **ì˜ëª»ëœ ë””ë ‰í† ë¦¬ì— íŒŒì¼ ìƒì„± ê¸ˆì§€**
- **ë¬¸ì œ**: `frontend/` í´ë”ì— ë§Œë“¤ì–´ì•¼ í•  íŒŒì¼ì„ ìƒìœ„ í´ë”(`/amica/`)ì— ìƒì„±
- **ê¸ˆì§€ ì‚¬ë¡€**:
  ```bash
  # ì˜ëª»ëœ ì˜ˆì‹œ - ì ˆëŒ€ í•˜ì§€ ë§ˆì„¸ìš”!
  edit_file("package.json")           # â†’ /amica/package.json (ì˜ëª»ë¨)
  edit_file("src/App.jsx")           # â†’ /amica/src/App.jsx (ì˜ëª»ë¨)
  ```
- **ì˜¬ë°”ë¥¸ ë°©ë²•**:
  ```bash
  edit_file("frontend/package.json")   # â†’ /amica/frontend/package.json (ì˜¬ë°”ë¦„)
  edit_file("frontend/src/App.jsx")   # â†’ /amica/frontend/src/App.jsx (ì˜¬ë°”ë¦„)
  ```

### 2. **ìƒëŒ€ ê²½ë¡œ ì˜¤í•´ ê¸ˆì§€**
- **í˜„ì¬ í„°ë¯¸ë„ ìœ„ì¹˜**: `/home/purestory/amica`
- **frontend ì‘ì—… ì‹œ**: ëª¨ë“  íŒŒì¼ ê²½ë¡œì— `frontend/` ì ‘ë‘ì‚¬ í•„ìˆ˜
- **backend ì‘ì—… ì‹œ**: ëª¨ë“  íŒŒì¼ ê²½ë¡œì— `backend/` ì ‘ë‘ì‚¬ í•„ìˆ˜

## âœ… **ë°˜ë“œì‹œ í•  ê²ƒ**

### 1. **íŒŒì¼ ìƒì„± ì „ ê²½ë¡œ í™•ì¸**
```bash
# 1ë‹¨ê³„: í˜„ì¬ ìœ„ì¹˜ í™•ì¸
pwd  # ê²°ê³¼: /home/purestory/amica ì´ì–´ì•¼ í•¨

# 2ë‹¨ê³„: í”„ë¡œì íŠ¸ êµ¬ì¡° í™•ì¸
ls -la  # frontend/, backend/, backup/ í´ë”ê°€ ìˆì–´ì•¼ í•¨

# 3ë‹¨ê³„: íƒ€ê²Ÿ í´ë” ë‚´ìš© í™•ì¸
ls -la frontend/  # frontend ì‘ì—… ì‹œ
ls -la backend/   # backend ì‘ì—… ì‹œ
```

### 2. **íŒŒì¼ ê²½ë¡œ íŒ¨í„´**

#### **Frontend íŒŒì¼ë“¤**
```bash
âœ… frontend/package.json
âœ… frontend/vite.config.js  
âœ… frontend/public/index.html
âœ… frontend/src/main.jsx
âœ… frontend/src/App.jsx
âœ… frontend/src/components/VRMViewer.jsx
âœ… frontend/src/styles/App.css
```

#### **Backend íŒŒì¼ë“¤**
```bash
âœ… backend/package.json
âœ… backend/src/app.js
âœ… backend/src/routes/config.js
âœ… backend/userdata/config.json
```

#### **í”„ë¡œì íŠ¸ ë£¨íŠ¸ íŒŒì¼ë“¤**
```bash
âœ… PROJECT_PLAN.md
âœ… README.md
âœ… .gitignore
```

### 3. **ì‘ì—… ìˆœì„œ**

#### **Frontend ì‘ì—… ì‹œ**
1. `cd frontend` ë˜ëŠ” í„°ë¯¸ë„ ìœ„ì¹˜ í™•ì¸
2. íŒŒì¼ ìƒì„±: `edit_file("frontend/íŒŒì¼ê²½ë¡œ")`
3. íŒ¨í‚¤ì§€ ì„¤ì¹˜: `cd frontend && npm install`
4. ê°œë°œ ì„œë²„: `cd frontend && npm run dev`

#### **Backend ì‘ì—… ì‹œ**
1. `cd backend` ë˜ëŠ” í„°ë¯¸ë„ ìœ„ì¹˜ í™•ì¸  
2. íŒŒì¼ ìƒì„±: `edit_file("backend/íŒŒì¼ê²½ë¡œ")`
3. íŒ¨í‚¤ì§€ ì„¤ì¹˜: `cd backend && npm install`
4. ì„œë²„ ì‹¤í–‰: `cd backend && npm start`

## ğŸ”§ **ì‹¤ìˆ˜ ë³µêµ¬ ë°©ë²•**

### ì˜ëª»ëœ ìœ„ì¹˜ì— íŒŒì¼ ìƒì„±ëœ ê²½ìš°
```bash
# 1. ì˜ëª» ìƒì„±ëœ íŒŒì¼ë“¤ í™•ì¸
ls -la /home/purestory/amica/

# 2. ì˜¬ë°”ë¥¸ ìœ„ì¹˜ë¡œ ì´ë™
mv package.json frontend/
mv src/* frontend/src/
mv public/* frontend/public/

# 3. ë¹ˆ í´ë” ì •ë¦¬
rmdir src public
```

## ğŸ“‹ **ì²´í¬ë¦¬ìŠ¤íŠ¸**

### íŒŒì¼ ìƒì„± ì „ í™•ì¸ì‚¬í•­
- [ ] í˜„ì¬ í„°ë¯¸ë„ ìœ„ì¹˜ê°€ `/home/purestory/amica` ì¸ê°€?
- [ ] ìƒì„±í•  íŒŒì¼ì´ frontendìš©ì¸ê°€, backendìš©ì¸ê°€?
- [ ] íŒŒì¼ ê²½ë¡œì— ì˜¬ë°”ë¥¸ ì ‘ë‘ì‚¬(`frontend/` ë˜ëŠ” `backend/`)ê°€ ìˆëŠ”ê°€?
- [ ] íƒ€ê²Ÿ í´ë”ê°€ ì¡´ì¬í•˜ëŠ”ê°€?

### ëª…ë ¹ ì‹¤í–‰ ì „ í™•ì¸ì‚¬í•­  
- [ ] `npm install`ì„ ì˜¬ë°”ë¥¸ í´ë”ì—ì„œ ì‹¤í–‰í•˜ëŠ”ê°€?
- [ ] `npm run dev`ë¥¼ ì˜¬ë°”ë¥¸ í´ë”ì—ì„œ ì‹¤í–‰í•˜ëŠ”ê°€?
- [ ] í™˜ê²½ë³€ìˆ˜ë‚˜ ì„¤ì •ì´ ì˜¬ë°”ë¥¸ ìœ„ì¹˜ì— ìˆëŠ”ê°€?

## ğŸ¯ **ëª©í‘œ í”„ë¡œì íŠ¸ êµ¬ì¡°**

```
amica/                           # í”„ë¡œì íŠ¸ ë£¨íŠ¸
â”œâ”€â”€ .git/                        # Git ì €ì¥ì†Œ
â”œâ”€â”€ .cursor/rules/               # Cursor ê·œì¹™ë“¤
â”œâ”€â”€ PROJECT_PLAN.md              # í”„ë¡œì íŠ¸ ê³„íšì„œ
â”œâ”€â”€ backup/                      # ê¸°ì¡´ í”„ë¡œì íŠ¸ ë°±ì—…
â”‚   â”œâ”€â”€ src/                     # ê¸°ì¡´ ì†ŒìŠ¤
â”‚   â”œâ”€â”€ public/                  # ê¸°ì¡´ ì •ì íŒŒì¼
â”‚   â””â”€â”€ userdata/                # ê¸°ì¡´ ì„¤ì •
â”œâ”€â”€ frontend/                    # React í”„ë¡ íŠ¸ì—”ë“œ
â”‚   â”œâ”€â”€ package.json             # âœ… Frontend ì˜ì¡´ì„±
â”‚   â”œâ”€â”€ vite.config.js           # âœ… Vite ì„¤ì •
â”‚   â”œâ”€â”€ public/
â”‚   â”‚   â””â”€â”€ index.html           # âœ… HTML í…œí”Œë¦¿
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ main.jsx             # âœ… React ì§„ì…ì 
â”‚       â”œâ”€â”€ App.jsx              # âœ… ë©”ì¸ ì»´í¬ë„ŒíŠ¸
â”‚       â”œâ”€â”€ components/          # UI ì»´í¬ë„ŒíŠ¸ë“¤
â”‚       â”œâ”€â”€ features/            # ê¸°ëŠ¥ë³„ ëª¨ë“ˆë“¤
â”‚       â”œâ”€â”€ hooks/               # React í›…ë“¤
â”‚       â””â”€â”€ styles/              # CSS ìŠ¤íƒ€ì¼ë“¤
â””â”€â”€ backend/                     # Express ë°±ì—”ë“œ
    â”œâ”€â”€ package.json             # âœ… Backend ì˜ì¡´ì„±
    â”œâ”€â”€ src/
    â”‚   â”œâ”€â”€ app.js               # âœ… Express ì„œë²„
    â”‚   â”œâ”€â”€ routes/              # API ë¼ìš°íŠ¸ë“¤
    â”‚   â”œâ”€â”€ controllers/         # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
    â”‚   â””â”€â”€ middleware/          # ë¯¸ë“¤ì›¨ì–´ë“¤
    â”œâ”€â”€ userdata/                # ì‚¬ìš©ì ë°ì´í„°
    â””â”€â”€ config/                  # ë°±ì—”ë“œ ì„¤ì •
```

## âš¡ **ë¹ ë¥¸ ì°¸ì¡°**

### ìì£¼ ì‚¬ìš©í•˜ëŠ” ì˜¬ë°”ë¥¸ ê²½ë¡œë“¤
- Frontend ë©”ì¸: `frontend/src/App.jsx`
- Frontend ìŠ¤íƒ€ì¼: `frontend/src/styles/App.css`  
- Frontend íŒ¨í‚¤ì§€: `frontend/package.json`
- Backend ë©”ì¸: `backend/src/app.js`
- Backend íŒ¨í‚¤ì§€: `backend/package.json`
- í”„ë¡œì íŠ¸ ë¬¸ì„œ: `PROJECT_PLAN.md`

### ì ˆëŒ€ ìƒì„±í•˜ë©´ ì•ˆë˜ëŠ” ê²½ë¡œë“¤  
- âŒ `package.json` (ë£¨íŠ¸ì— ìƒì„±ë¨)
- âŒ `src/App.jsx` (ë£¨íŠ¸ì— ìƒì„±ë¨)
- âŒ `public/index.html` (ë£¨íŠ¸ì— ìƒì„±ë¨)
- âŒ `vite.config.js` (ë£¨íŠ¸ì— ìƒì„±ë¨)

## ğŸŒ **Nginx ë° ì •ì  íŒŒì¼ ì„œë¹™ ê·œì¹™**

### âœ… **ì˜¬ë°”ë¥¸ ë°°í¬ í”„ë¡œì„¸ìŠ¤**
```bash
# 1. Frontend ë¹Œë“œ (í•„ìˆ˜)
cd frontend && npm run build

# 2. ë¹Œë“œ ê²°ê³¼ í™•ì¸
ls -la frontend/dist/

# 3. ë! nginxëŠ” ìë™ìœ¼ë¡œ ìƒˆ íŒŒì¼ì„ ì„œë¹™í•¨
```

### ğŸš¨ **ì ˆëŒ€ í•˜ì§€ ë§ ê²ƒ - Nginx ê´€ë ¨**

#### 1. **ë¶ˆí•„ìš”í•œ nginx reload/restart ê¸ˆì§€**
```bash
# âŒ ì˜ëª»ëœ ì˜ˆì‹œ - ì ˆëŒ€ í•˜ì§€ ë§ˆì„¸ìš”!
sudo systemctl reload nginx    # ì •ì  íŒŒì¼ ë³€ê²½ì‹œ ë¶ˆí•„ìš”
sudo systemctl restart nginx   # ì •ì  íŒŒì¼ ë³€ê²½ì‹œ ë¶ˆí•„ìš”
```

**ì´ìœ **: nginxëŠ” ì •ì  íŒŒì¼(`frontend/dist/`)ì„ ì§ì ‘ ì„œë¹™í•˜ë¯€ë¡œ, íŒŒì¼ì´ ë³€ê²½ë˜ë©´ ì¦‰ì‹œ ë°˜ì˜ë©ë‹ˆë‹¤.

#### 2. **nginx reloadê°€ í•„ìš”í•œ ê²½ìš° vs ë¶ˆí•„ìš”í•œ ê²½ìš°**

**âœ… nginx reloadê°€ í•„ìš”í•œ ê²½ìš°:**
- nginx ì„¤ì • íŒŒì¼ ë³€ê²½ (`/etc/nginx/sites-available/purestory`)
- ìƒˆë¡œìš´ ë„ë©”ì¸/í¬íŠ¸ ì¶”ê°€
- SSL ì¸ì¦ì„œ ë³€ê²½
- í”„ë¡ì‹œ ì„¤ì • ë³€ê²½

**âŒ nginx reloadê°€ ë¶ˆí•„ìš”í•œ ê²½ìš°:**
- `npm run build` í›„ ì •ì  íŒŒì¼ ë³€ê²½
- HTML, CSS, JS íŒŒì¼ ë‚´ìš© ë³€ê²½
- ì´ë¯¸ì§€, VRM íŒŒì¼ ë“± ì •ì  ìì‚° ë³€ê²½

### ğŸ“‹ **ì •ì  íŒŒì¼ ë°°í¬ ì²´í¬ë¦¬ìŠ¤íŠ¸**

#### Frontend ë³€ê²½ì‚¬í•­ ë°°í¬ ì‹œ
- [ ] `cd frontend` ë””ë ‰í† ë¦¬ ì´ë™ í™•ì¸
- [ ] `npm run build` ì‹¤í–‰
- [ ] `frontend/dist/` í´ë”ì— ìƒˆ íŒŒì¼ ìƒì„± í™•ì¸
- [ ] ë¸Œë¼ìš°ì €ì—ì„œ ìƒˆë¡œê³ ì¹¨ìœ¼ë¡œ ë³€ê²½ì‚¬í•­ í™•ì¸
- [ ] âŒ nginx reload í•˜ì§€ ì•Šê¸°!

#### Nginx ì„¤ì • ë³€ê²½ ì‹œì—ë§Œ
- [ ] `/etc/nginx/sites-available/purestory` íŒŒì¼ ìˆ˜ì •
- [ ] `sudo nginx -t` ì„¤ì • í…ŒìŠ¤íŠ¸
- [ ] `sudo systemctl reload nginx` ì„¤ì • ì ìš©

### ğŸ”§ **í˜„ì¬ í”„ë¡œì íŠ¸ nginx ì„¤ì •**
```nginx
# /etc/nginx/sites-available/purestory
location /amica/ {
    alias /home/purestory/amica/frontend/dist/;
    try_files $uri $uri/ /amica/index.html;
}
```

**ë™ì‘ ë°©ì‹**: 
- `https://ai-open.kr/amica/` ìš”ì²­ ì‹œ
- nginxê°€ `/home/purestory/amica/frontend/dist/` í´ë”ì˜ íŒŒì¼ì„ ì§ì ‘ ì„œë¹™
- íŒŒì¼ ë³€ê²½ ì‹œ ì¦‰ì‹œ ë°˜ì˜ (reload ë¶ˆí•„ìš”)
